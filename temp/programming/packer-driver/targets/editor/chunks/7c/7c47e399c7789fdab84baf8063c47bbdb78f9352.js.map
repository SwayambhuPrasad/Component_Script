{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/Background/puzzle.ts"],"names":["_decorator","Component","Button","find","AS","UIView","ChangeBackground","ValidationEvent","ccclass","property","puzzle","backGround","popup","currentIndex","nextVis","close","isCorrect","backUpBG","awake","on","_setNavStatus","bind","node","getChildByName","getComponentsInChildren","children","forEach","active","p","i","EventType","CLICK","event","_onButtonClicktoshow","TYPE","ev","onRevail","_callToVisible","Screen","ScreenTag","index","console","log","show","screen","getComponent","_navButtonVisibility","hide","ButtonClick","play","count","length"],"mappings":"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","sourcesContent":["import { throws } from 'assert';\nimport { _decorator, Component, Node, Button,find, Intersection2D, PolygonCollider2D, EventTouch } from 'cc';\nimport { AS, UIPopup, UIView } from 'db://as_framework/scripts';\nimport { ChangeBackground } from './ChangeBackground';\nimport { ValidationEvent } from './ValidationEvent';\nconst { ccclass, property } = _decorator;\n\n@ccclass('puzzle')\nexport class puzzle extends AS(Component) {\nprivate backGround:Node=null;\nprivate puzzle: Button [] = [];\nprivate popup : UIView [] = [];\nprivate currentIndex = -1;\nprivate nextVis=false;\nprivate close:Node=null;\nprivate isCorrect=false;\nprivate backUpBG: Node =  null;\n\n\n@property private ScreenTag=-1;\n\nawake(){\n    this.backGround= find(\"Canvas_new/BackGround\");\n    this.backGround.on(\"Screen\",this._setNavStatus.bind(this));\n\n    this.puzzle= this.node.getChildByName(\"Puzzles\").getComponentsInChildren(Button);\n    this.popup=  this.node.getComponentsInChildren(UIView);\n\n    this.backUpBG=this.node.getChildByName(\"BackUpBG\").children[0];\n\n    this.popup.forEach((popup) => popup.node.active = false);\n\n    this.puzzle.forEach((p,i) => {\n        p.node.on(Button.EventType.CLICK,(event:EventTouch)=>{\n            this._onButtonClicktoshow(i)},this);\n    });\n\n    this.close=this.node.getChildByName(\"close\");\n    this.node.on(ValidationEvent.TYPE, (ev: ValidationEvent) => {\n        this.isCorrect=ev.isCorrect;\n        if(ev.isCorrect)this.onRevail();})\n}\n\n\n_callToVisible(Screen){\n    if(this.ScreenTag == Screen) this.node.active=true;\n    else if(this.ScreenTag==-1) return;\n    else this.node.active=false;\n  }\n\n_onButtonClicktoshow(index){\n\n    this.currentIndex=index;\n    console.log(\"current-index\", index)\n    this.popup[index].show();\n    this.close.active=true;\n\n}\n\n_setNavStatus(screen){\n    if(this.ScreenTag==screen){\n      console.log(\"set\",screen)\n      this.backGround.getComponent(ChangeBackground)._navButtonVisibility(this.nextVis,true,false)\n    }\n  }\n onRevail(){\n\n        this.close.active=false;\n        this.popup[this.currentIndex].hide();\n       if(this.isCorrect) this.puzzle[this.currentIndex].node.active=false;\n       else this.backGround.getComponent(ChangeBackground).ButtonClick.play();\n       this.isCorrect=false;\n        var count=0;\n        this.puzzle.forEach((p) => {\n            if(p.node.active==false) count++;\n        });\n        if(count==this.puzzle.length) {\n        this.nextVis=true\n       this.backUpBG.active=true;}\n        this.backGround.getComponent(ChangeBackground)._navButtonVisibility(this.nextVis,true,false)\n}\n}\n\n\n"]}