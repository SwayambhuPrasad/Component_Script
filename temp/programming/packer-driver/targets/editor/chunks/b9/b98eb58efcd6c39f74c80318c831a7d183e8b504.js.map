{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/Storypanel/StoryPanel.ts"],"names":["Button","Component","Node","Vec3","_decorator","AS","UIDrag","UIDrop","UIPopup","ccclass","property","StoryPanel","type","_filled","awake","_arrangeDraggable","_addComponent","i","panel","children","length","addComponent","on","EventType","CLICK","_onButtonClick","DragContainer","popup","node","ABOUT_TO_HIDE","_onpopuphide","gridPositions","gridSelector","numberOfElementPerpage","position","show"],"mappings":"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","sourcesContent":["import { Button, Component, Node, Vec3, _decorator } from \"cc\";\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { UIDrag, UIDrop, UIPopup } from \"../../extensions/as_framework/framework/assets/scripts\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"StoryPanel\")\nexport class StoryPanel extends AS(Component) {\n  // @property({ type: SpriteFrame }) panelSlots: SpriteFrame[] = [];\n  @property({ type: Node }) panel: Node = null;\n  @property({ type: UIPopup }) popup: UIPopup | null = null;\n  @property({ type: Node }) DragContainer: Node = null;\n  @property numberOfElementPerpage: number = 4;\n\n  private _filled = [];\n\n  awake() {\n    this._arrangeDraggable();\n    this._addComponent();\n  }\n\n  _addComponent() {\n    for (let i = 0; i < this.panel.children.length; i++) {\n      this.panel.children[i].addComponent(UIDrop);\n    }\n\n    this.panel.addComponent(Button);\n    this.panel.on(Button.EventType.CLICK, this._onButtonClick, this);\n\n    for (let i = 0; i < this.DragContainer.children.length; i++) {\n      this.DragContainer.children[i].addComponent(UIDrag);\n    }\n\n    this.popup.node.on(UIPopup.EventType.ABOUT_TO_HIDE, this._onpopuphide, this);\n  }\n\n  _arrangeDraggable() {\n    let gridPositions = [\n      [\n        [-150, 80],\n        [150, 80],\n        [-150, -120],\n        [150, -120],\n      ],\n      [\n        [-150, 0],\n        [150, 0],\n      ],\n    ];\n    let gridSelector;\n    if (this.numberOfElementPerpage == 2) gridSelector = 1;\n    else if (this.numberOfElementPerpage == 4) gridSelector = 0;\n\n    for (let i = 0; i < this.DragContainer.children.length; i++) {\n      if (i < this.numberOfElementPerpage) {\n        this.DragContainer.children[i].position = new Vec3(\n          gridPositions[gridSelector][i][0],\n          gridPositions[gridSelector][i][1],\n          0,\n        );\n      } else {\n        this.DragContainer.children[i - this.numberOfElementPerpage].position = new Vec3(\n          gridPositions[gridSelector][i][0],\n          gridPositions[gridSelector][i][1],\n          0,\n        );\n      }\n    }\n  }\n\n  _onButtonClick() {\n    this.popup.show();\n  }\n\n  _onpopuphide() {}\n}\n"]}