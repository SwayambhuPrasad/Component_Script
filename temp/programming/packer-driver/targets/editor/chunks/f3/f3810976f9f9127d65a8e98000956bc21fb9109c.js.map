{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/TapToReveal/TapToReveal.ts"],"names":["_decorator","Component","Button","Node","Layout","Sprite","SpriteFrame","instantiate","Prefab","AS","ReplicatedButton","UIView","ccclass","property","TapToReveal","_buttons","_reveals","awake","_addEventListeners","i","tapButtons","length","newButton","buttonPrefab","parent","buttonContainer","node","addComponent","push","newReveal","revealPrefab","revealContainer","forEach","rev","getComponent","spriteFrame","revealSprites","btn","getChildByName","tapButtonsHilight","on","EventType","CLICK","btnhl","j","active","commonTap","show","_onTapToReveal","hide"],"mappings":"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","sourcesContent":["import { _decorator, Component, Button, Node, Layout, Sprite, SpriteFrame, instantiate, Prefab} from 'cc';\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { ReplicatedButton } from \"db://as_framework/scripts/ReplicatedButton\";\nimport { UIView } from \"db://as_framework/scripts/UIView\"\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('TapToReveal')\nexport class TapToReveal extends AS(Component) {\n    @property(Layout) buttonContainer : Layout | null = null;\n    @property(Node) revealContainer : Node | null = null;\n    @property(Node) commonTap : Node | null = null;\n    @property(Prefab) buttonPrefab : Prefab | null = null;\n    @property(Prefab) revealPrefab : Prefab | null = null;\n    @property(SpriteFrame) tapButtons : SpriteFrame[] | null = [];\n    @property(SpriteFrame) tapButtonsHilight : SpriteFrame[] | null = [];\n    @property(SpriteFrame) revealSprites : SpriteFrame[] | null = [];\n\n    private _buttons : Node[] | null = [];\n    private _reveals : Node[] | null = [];\n\n\n    awake(){\n\n        this._addEventListeners();\n       // this._buttons.push(this.buttonContainer.node.children[0]);\n       //this._reveals.push(this.revealContainer.children[0]);\n        //instantiate all buttons and nodes\n        for(let i = 0; i < this.tapButtons.length; i++) {\n                let newButton = instantiate(this.buttonPrefab);\n                newButton.parent = this.buttonContainer.node;\n                newButton.addComponent(ReplicatedButton);\n\n                this._buttons.push(newButton);\n                let newReveal = instantiate(this.revealPrefab);\n                newReveal.parent = this.revealContainer;\n                this._reveals.push(newReveal);\n        }\n        //assign spriteframes\n        this._reveals.forEach((rev, i) => {\n            rev.getComponent(Sprite).spriteFrame = this.revealSprites[i];\n        });\n        //assign spriteframes to buttons and handle button click\n        this._buttons.forEach((btn, i) => {\n            btn.getComponent(Sprite).spriteFrame = this.tapButtons[i];\n            btn.getChildByName('Hilight').getComponent(Sprite).spriteFrame = this.tapButtonsHilight[i];\n            btn.on(Button.EventType.CLICK, () => {\n                this._buttons.forEach((btnhl, j) => {\n                    btnhl.getChildByName('Hilight').active = false;\n                })\n                btn.getChildByName('Hilight').active = true;\n                this.commonTap.getComponent(UIView).show();\n                this._reveals.forEach((rev, j) => {\n                    rev.active = false;\n                });\n                this._reveals[i].active = true;\n            })\n        });\n    }\n\n    private _addEventListeners() {\n        this.commonTap.on(Button.EventType.CLICK, this._onTapToReveal, this);\n    }\n    private _onTapToReveal(){\n        this.commonTap.getComponent(UIView).hide();\n    }\n}"]}