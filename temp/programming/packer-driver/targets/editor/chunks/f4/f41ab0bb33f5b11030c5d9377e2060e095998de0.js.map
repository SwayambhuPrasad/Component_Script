{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/SoftKey.ts"],"names":["Button","Component","Label","systemEvent","SystemEvent","_decorator","AS","ccclass","property","requireComponent","SoftKey","_keyCodes","Array","_clickCallback","keyLabel","_keyLabel","string","button","getComponent","value","setClickCallback","fn","keyCode","concat","node","on","EventType","CLICK","onEnable","length","KEY_DOWN","_onSystemKeyDown","onDisable","off","event","indexOf"],"mappings":";;;;;;;;;;;;;;;;;;;;AACEA,MAAAA,M,OAAAA,M;AACAC,MAAAA,S,OAAAA,S;AAGAC,MAAAA,K,OAAAA,K;AACAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,U,OAAAA,U;;AAEOC,MAAAA,E,iBAAAA,E;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CJ,U;;yBAMnCK,O,WAFZH,OAAO,CAAC,SAAD,C,UACPE,gBAAgB,CAACT,MAAD,C,UAMdQ,QAAQ,CAACN,KAAD,C,0CAPX,MAEaQ,OAFb,SAE6B;AAAA;AAAA,oBAAGT,SAAH,CAF7B,CAE2C;AAAA;AAAA;;AAAA;;AAAA,eAGjCU,SAHiC,GAGrB,IAAIC,KAAJ,EAHqB;;AAAA,eA+CjCC,cA/CiC,GA+CH,MAAM,CAAE,CA/CL;AAAA;;AAM7B,YAARC,QAAQ,GAAG;AACb,iBAAO,KAAKC,SAAZ;AACD;;AAGS,YAANC,MAAM,GAAW;AAAA;;AACnB,4DAAO,KAAKF,QAAZ,qBAAO,eAAeE,MAAtB,oCAAgC,EAAhC;AACD;;AAES,YAANC,MAAM,GAAG;AACX,iBAAO,KAAKC,YAAL,CAAkBlB,MAAlB,CAAP;AACD;;AAEW,YAARc,QAAQ,CAACK,KAAD,EAAQ;AAClB,eAAKJ,SAAL,GAAiBI,KAAjB;AACD;;AAES,YAANH,MAAM,CAACG,KAAD,EAAgB;AACxB,cAAI,KAAKL,QAAT,EAAmB,KAAKA,QAAL,CAAcE,MAAd,GAAuBG,KAAvB;AACpB;;AAEDC,QAAAA,gBAAgB,CAACC,EAAD,EAAkBC,OAAlB,EAAiD;AAC/D,eAAKT,cAAL,GAAsBQ,EAAtB;AACA,cAAIC,OAAJ,EAAa,KAAKX,SAAL,GAAiB,KAAKA,SAAL,CAAeY,MAAf,CAAsBD,OAAtB,CAAjB;AACb,eAAKE,IAAL,CAAUC,EAAV,CAAazB,MAAM,CAAC0B,SAAP,CAAiBC,KAA9B,EAAqC,KAAKd,cAA1C;AACD;;AAEDe,QAAAA,QAAQ,GAAG;AACT,eAAKJ,IAAL,CAAUC,EAAV,CAAazB,MAAM,CAAC0B,SAAP,CAAiBC,KAA9B,EAAqC,KAAKd,cAA1C;;AACA,cAAI,KAAKF,SAAL,CAAekB,MAAf,GAAwB,CAA5B,EAA+B;AAC7B1B,YAAAA,WAAW,CAACsB,EAAZ,CAAerB,WAAW,CAACsB,SAAZ,CAAsBI,QAArC,EAA+C,KAAKC,gBAApD,EAAsE,IAAtE;AACD;AACF;;AAEDC,QAAAA,SAAS,GAAG;AACV,eAAKR,IAAL,CAAUS,GAAV,CAAcjC,MAAM,CAAC0B,SAAP,CAAiBC,KAA/B,EAAsC,KAAKd,cAA3C;;AACA,cAAI,KAAKF,SAAL,CAAekB,MAAf,GAAwB,CAA5B,EAA+B;AAC7B1B,YAAAA,WAAW,CAAC8B,GAAZ,CAAgB7B,WAAW,CAACsB,SAAZ,CAAsBI,QAAtC,EAAgD,KAAKC,gBAArD,EAAuE,IAAvE;AACD;AACF;;AAIOA,QAAAA,gBAAgB,CAACG,KAAD,EAAuB;AAC7C,cAAI,KAAKvB,SAAL,CAAewB,OAAf,CAAuBD,KAAK,CAACZ,OAA7B,MAA0C,CAAC,CAA/C,EAAkD;AAChD,iBAAKT,cAAL;AACD;AACF;;AArDwC,O,4EACxCL,Q;;;;;iBAA2C,I;;wNAS3CA,Q","sourcesContent":["import {\n  Button,\n  Component,\n  EventKeyboard,\n  KeyCode,\n  Label,\n  systemEvent,\n  SystemEvent,\n  _decorator,\n} from \"cc\";\nimport { AS } from \"./ASComponent\";\n\nconst { ccclass, property, requireComponent } = _decorator;\n\nexport type KeyCallback = () => void;\n\n@ccclass(\"SoftKey\")\n@requireComponent(Button)\nexport class SoftKey extends AS(Component) {\n  @property private _keyLabel: Label | null = null;\n\n  private _keyCodes = new Array<KeyCode>();\n\n  @property(Label)\n  get keyLabel() {\n    return this._keyLabel;\n  }\n\n  @property\n  get string(): string {\n    return this.keyLabel?.string ?? \"\";\n  }\n\n  get button() {\n    return this.getComponent(Button);\n  }\n\n  set keyLabel(value) {\n    this._keyLabel = value;\n  }\n\n  set string(value: string) {\n    if (this.keyLabel) this.keyLabel.string = value;\n  }\n\n  setClickCallback(fn: KeyCallback, keyCode?: KeyCode | KeyCode[]) {\n    this._clickCallback = fn;\n    if (keyCode) this._keyCodes = this._keyCodes.concat(keyCode);\n    this.node.on(Button.EventType.CLICK, this._clickCallback);\n  }\n\n  onEnable() {\n    this.node.on(Button.EventType.CLICK, this._clickCallback);\n    if (this._keyCodes.length > 0) {\n      systemEvent.on(SystemEvent.EventType.KEY_DOWN, this._onSystemKeyDown, this);\n    }\n  }\n\n  onDisable() {\n    this.node.off(Button.EventType.CLICK, this._clickCallback);\n    if (this._keyCodes.length > 0) {\n      systemEvent.off(SystemEvent.EventType.KEY_DOWN, this._onSystemKeyDown, this);\n    }\n  }\n\n  private _clickCallback: KeyCallback = () => {};\n\n  private _onSystemKeyDown(event: EventKeyboard) {\n    if (this._keyCodes.indexOf(event.keyCode) !== -1) {\n      this._clickCallback();\n    }\n  }\n}\n"]}