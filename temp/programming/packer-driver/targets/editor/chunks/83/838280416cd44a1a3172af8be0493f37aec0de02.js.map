{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/FIB/FIB.ts"],"names":["Button","Component","instantiate","Label","Layout","Prefab","_decorator","AS","ReplicatedButton","UIPopup","ccclass","property","requireComponent","FIB","type","String","_button","awake","_insertChild","getComponentInChildren","addComponent","_addEventListeners","popup","node","children","on","EventType","CLICK","_onCrossClick","options","optionsContainer","getComponentsInChildren","seletion","forEach","opt","i","console","log","_clearOptions","string","optionLabel","j","length","active","_onCheckClick","lableAssigner","_onButtonClick","show","hide","name","correctIndex","_optionSelection","index","getComponent","addchild","optionPrefab","parent","mcqLable","btnLable"],"mappings":"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","sourcesContent":["import { Button, Component, instantiate, Label, Layout, Prefab, _decorator } from \"cc\";\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { ReplicatedButton } from \"db://as_framework/scripts/ReplicatedButton\";\nimport { UIPopup } from \"db://as_framework/scripts/UIPopup\";\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass(\"FIB\")\nexport class FIB extends AS(Component) {\n  @property(UIPopup) popup: UIPopup | null = null;\n\n  @property(Prefab) private optionPrefab: Prefab = null;\n\n  private _button: Button | null = null;\n\n  @property(Layout) private optionsContainer: Layout | null = null;\n\n  @property({ type: String }) private optionLabel: string[] = [];\n\n  @property private correctIndex: number = 0;\n\n  // @property(Node) private check=  Node||null;\n\n  // @property(Node) private =  Node||null;\n\n  awake() {\n    this._insertChild();\n    this._button = this.getComponentInChildren(Button);\n    this._button.addComponent(ReplicatedButton);\n    this._addEventListeners();\n\n    this.popup.node.children[0].addComponent(Button);\n    this.popup.node.children[0].addComponent(ReplicatedButton);\n    this.popup.node.children[0].on(Button.EventType.CLICK, () => {\n      this._onCrossClick();\n    });\n\n    var options = this.optionsContainer.getComponentsInChildren(Button);\n    var seletion = null;\n\n    options.forEach((opt, i) => {\n      console.log(\"name\", i);\n      opt.node.on(\n        Button.EventType.CLICK,\n        () => {\n          this._clearOptions();\n          seletion = i;\n          this.popup.node.children[2].getComponentInChildren(Label).string = this.optionLabel[i];\n          for (let j = 0; j < options.length; j++) {\n            if (i == j) options[i].node.children[0].active = true;\n            else options[j].node.children[0].active = false;\n          }\n        },\n        this,\n      );\n    });\n\n    this.popup.node.children[3].addComponent(Button);\n    this.popup.node.children[3].addComponent(ReplicatedButton);\n    this.popup.node.children[3].on(\n      Button.EventType.CLICK,\n      () => {\n        this._onCheckClick(options, seletion);\n      },\n      this,\n    );\n    this.lableAssigner();\n  }\n\n  private _addEventListeners() {\n    this._button.node.on(Button.EventType.CLICK, this._onButtonClick, this);\n  }\n\n  _onButtonClick() {\n    this.popup.show();\n  }\n\n  _onCrossClick() {\n    this.popup.hide();\n    this._clearOptions();\n  }\n\n  _clearOptions() {\n    var options = this.optionsContainer.getComponentsInChildren(Button);\n    //console.log(options.length)\n    options.forEach((opt, j) => {\n      console.log(opt.name);\n      for (let i = 0; i < 3; i++) opt.node.children[i].active = false;\n    });\n  }\n\n  _onCheckClick(options, seletion) {\n    if (seletion != null)\n      if (seletion == this.correctIndex) {\n        options[seletion].node.children[1].active = true;\n        this._button.node.getComponentInChildren(Label).string =\n          options[seletion].getComponentInChildren(Label).string;\n        //this._onCrossClick();\n      } else options[seletion].node.children[2].active = true;\n  }\n\n  _optionSelection(index) {\n    console.log(\"running\", index);\n    this.popup.node.children[2].getComponent(Label).string = this.optionLabel[index];\n  }\n\n  _insertChild() {\n    for (let i = 0; i < this.optionLabel.length; i++) {\n      let addchild = instantiate(this.optionPrefab);\n      addchild.addComponent(Button);\n      addchild.addComponent(ReplicatedButton);\n      addchild.parent = this.optionsContainer.node;\n    }\n  }\n\n  lableAssigner() {\n    const mcqLable = this.popup.node.children[1].getComponentsInChildren(Label);\n    mcqLable.forEach((btnLable, i) => {\n      if (this.optionLabel.length <= i) {\n        btnLable.node.parent.active = false;\n      } else btnLable.string = this.optionLabel[i];\n    });\n  }\n}\n"]}