{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/TranslatedLabel.ts"],"names":["Component","Label","_decorator","EDITOR","AS","i18n","ccclass","property","requireComponent","TranslatedLabel","tooltip","_label","key","_key","string","getComponent","value","awake","updateTranslation","onEnable","translationsLoadedEvent","on","onDisable","off","enabled","t"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,U,OAAAA,U;;AAClBC,MAAAA,M,UAAAA,M;;AACAC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CN,U;;iCAInCO,e,WAFZH,OAAO,CAAC,iBAAD,C,UACPE,gBAAgB,CAACP,KAAD,C,UAMdM,QAAQ,CAAC;AACRG,QAAAA,OAAO,EAAG;AADF,OAAD,C,0CAPX,MAEaD,eAFb,SAEqC;AAAA;AAAA,oBAAGT,SAAH,CAFrC,CAEmD;AAAA;AAAA;;AAAA;;AAAA,eAGzCW,MAHyC,GAGlB,IAHkB;AAAA;;AAQ1C,YAAHC,GAAG,GAAG;AACR,iBAAO,KAAKC,IAAZ;AACD;;AAES,YAANC,MAAM,GAAG;AAAA;;AACX,cAAIX,MAAM,IAAI,KAAKQ,MAAL,IAAe,IAA7B,EAAmC;AACjC,iBAAKA,MAAL,GAAc,KAAKI,YAAL,CAAkBd,KAAlB,CAAd;AACD;;AACD,wDAAO,KAAKU,MAAZ,qBAAO,aAAaG,MAApB,kCAA8B,EAA9B;AACD;;AAEM,YAAHF,GAAG,CAACI,KAAD,EAAgB;AACrB,eAAKH,IAAL,GAAYG,KAAZ;AACD;;AAES,YAANF,MAAM,CAACE,KAAD,EAAgB;AACxB;AACA,cAAI,CAACA,KAAD,IAAU,KAAKL,MAAL,IAAe,IAA7B,EAAmC;AACnC,eAAKA,MAAL,CAAYG,MAAZ,GAAqBE,KAArB;AACD;;AAEDC,QAAAA,KAAK,GAAG;AACN,eAAKN,MAAL,GAAc,KAAKI,YAAL,CAAkBd,KAAlB,CAAd;AACA,eAAKiB,iBAAL;AACD;;AAEDC,QAAAA,QAAQ,GAAG;AACT;AAAA;AAAA,4BAAKC,uBAAL,CAA6BC,EAA7B,CAAgC,KAAKH,iBAArC,EAAwD,IAAxD;AACD;;AAEDI,QAAAA,SAAS,GAAG;AACV;AAAA;AAAA,4BAAKF,uBAAL,CAA6BG,GAA7B,CAAiC,KAAKL,iBAAtC,EAAyD,IAAzD;AACD;;AAEDA,QAAAA,iBAAiB,GAAG;AAClB,cAAI,CAAC;AAAA;AAAA,4BAAKM,OAAV,EAAmB;AACnB,eAAKV,MAAL,GAAc;AAAA;AAAA,4BAAKW,CAAL,CAAO,KAAKb,GAAZ,CAAd;AACD;;AA7CgD,O,uEAChDL,Q;;;;;iBAAwB,E","sourcesContent":["import { Component, Label, _decorator } from \"cc\";\nimport { EDITOR } from \"cc/env\";\nimport { AS } from \"./ASComponent\";\nimport { i18n } from \"./Translations\";\n\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass(\"TranslatedLabel\")\n@requireComponent(Label)\nexport class TranslatedLabel extends AS(Component) {\n  @property private _key = \"\";\n\n  private _label: Label | null = null;\n\n  @property({\n    tooltip: `The key used to get the translated string.`,\n  })\n  get key() {\n    return this._key;\n  }\n\n  get string() {\n    if (EDITOR && this._label == null) {\n      this._label = this.getComponent(Label);\n    }\n    return this._label?.string ?? \"\";\n  }\n\n  set key(value: string) {\n    this._key = value;\n  }\n\n  set string(value: string) {\n    // Ignore if string not valid!\n    if (!value || this._label == null) return;\n    this._label.string = value;\n  }\n\n  awake() {\n    this._label = this.getComponent(Label);\n    this.updateTranslation();\n  }\n\n  onEnable() {\n    i18n.translationsLoadedEvent.on(this.updateTranslation, this);\n  }\n\n  onDisable() {\n    i18n.translationsLoadedEvent.off(this.updateTranslation, this);\n  }\n\n  updateTranslation() {\n    if (!i18n.enabled) return;\n    this.string = i18n.t(this.key);\n  }\n}\n"]}