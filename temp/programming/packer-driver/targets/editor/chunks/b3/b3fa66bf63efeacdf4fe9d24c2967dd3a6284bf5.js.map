{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/TapPop/TapPop.ts"],"names":["Button","Component","ProgressBar","AudioSource","Node","tween","_decorator","Intersection2D","PolygonCollider2D","UITransform","AS","UIPopup","ccclass","property","TapPop","_progressTween","awake","polygonButton","node","on","EventType","MOUSE_DOWN","event","_pop","popup","ABOUT_TO_HIDE","progressBar","stop","set","progress","start","totalLength","getComponent","width","duration","audio","to","e","worldPoints","pointInPolygon","getUILocation","show","progressPlay"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAUC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAKC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,iB,OAAAA,iB;AAAmBC,MAAAA,W,OAAAA,W;;AACtGC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;wBAGjBQ,M,WADZF,OAAO,CAAC,QAAD,C,UAEHC,QAAQ,CAACb,MAAD,C,UACRa,QAAQ;AAAA;AAAA,6B,UACRA,QAAQ,CAACX,WAAD,C,UACRW,QAAQ,CAACV,WAAD,C,2BALb,MACaW,MADb,SAC4B;AAAA;AAAA,oBAAGb,SAAH,CAD5B,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAM9Bc,cAN8B;AAAA;;AAStCC,QAAAA,KAAK,GAAE;AACH,eAAKC,aAAL,CAAmBC,IAAnB,CAAwBC,EAAxB,CAA2Bf,IAAI,CAACgB,SAAL,CAAeC,UAA1C,EAAuDC,KAAD,IAAU;AACxD,iBAAKC,IAAL,CAAUD,KAAV;AACH,WAFL,EAEM,IAFN;AAIA,eAAKE,KAAL,CAAWN,IAAX,CAAgBC,EAAhB,CAAmB;AAAA;AAAA,kCAAQC,SAAR,CAAkBK,aAArC,EAAoD,MAAM;AACtD,gBAAG,KAAKC,WAAL,IAAoB,IAAvB,EAA4B;AACxB,mBAAKX,cAAL,CAAoBY,IAApB;;AACAtB,cAAAA,KAAK,CAAC,KAAKqB,WAAN,CAAL,CAAwBE,GAAxB,CAA4B;AAACC,gBAAAA,QAAQ,EAAC;AAAV,eAA5B,EAA0CC,KAA1C;AACH;AACJ,WALD;;AAMA,cAAG,KAAKJ,WAAL,IAAoB,IAAvB,EACA;AAAI,gBAAIK,WAAW,GAAG,KAAKL,WAAL,CAAiBM,YAAjB,CAA8BvB,WAA9B,EAA2CwB,KAA7D;AACA,gBAAIC,QAAQ,GAAG,KAAKC,KAAL,CAAWD,QAA1B;AACA,iBAAKnB,cAAL,GAAsBV,KAAK,CAAC,KAAKqB,WAAN,CAAL,CAAwBE,GAAxB,CAA4B;AAACC,cAAAA,QAAQ,EAAC,CAAV;AAAaE,cAAAA,WAAW,EAAEA;AAA1B,aAA5B,EAAoEK,EAApE,CAAuEF,QAAvE,EAAiF;AAACL,cAAAA,QAAQ,EAAE;AAAX,aAAjF,EAAgGD,GAAhG,CAAoG;AAACC,cAAAA,QAAQ,EAAC;AAAV,aAApG,CAAtB;AACH;AACJ;;AACON,QAAAA,IAAI,CAACc,CAAD,EAAG;AACX,cAAIC,WAAW,GAAG,KAAKrB,aAAL,CAAmBC,IAAnB,CAAwBc,YAAxB,CAAqCxB,iBAArC,EAAwD8B,WAA1E;AACA,cAAG/B,cAAc,CAACgC,cAAf,CAA8BF,CAAC,CAACG,aAAF,EAA9B,EAAiDF,WAAjD,CAAH,EACI,KAAKd,KAAL,CAAWiB,IAAX;AAEP;;AACOC,QAAAA,YAAY,CAACL,CAAD,EAAG;AACnB,eAAKtB,cAAL,CAAoBe,KAApB;AACH;;AAlCqC,O;;;;;iBACY,I;;;;;;;iBACN,I;;;;;;;iBACc,I;;;;;;;iBACN,I","sourcesContent":["import { Button, Component,ProgressBar,AudioSource, Node,tween, _decorator, Intersection2D, PolygonCollider2D, UITransform } from \"cc\";\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { UIPopup } from \"db://as_framework/scripts/UIPopup\";\nconst { ccclass, property } = _decorator;\n\n@ccclass('TapPop')\nexport class TapPop extends AS(Component) {\n    @property(Button) polygonButton : Button | null = null;\n    @property(UIPopup) popup : UIPopup | null = null;\n    @property(ProgressBar) progressBar : ProgressBar | null = null;\n    @property(AudioSource) audio : AudioSource | null = null;\n\n    private _progressTween;\n\n    \n    awake(){\n        this.polygonButton.node.on(Node.EventType.MOUSE_DOWN, (event)=> {\n                this._pop(event);\n            },this);\n\n        this.popup.node.on(UIPopup.EventType.ABOUT_TO_HIDE, () => {\n            if(this.progressBar != null){\n                this._progressTween.stop();\n                tween(this.progressBar).set({progress:0}).start();\n            }\n        })\n        if(this.progressBar != null)\n        {   let totalLength = this.progressBar.getComponent(UITransform).width;\n            let duration = this.audio.duration;\n            this._progressTween = tween(this.progressBar).set({progress:0, totalLength: totalLength}).to(duration, {progress: 1}).set({progress:0});\n        }\n    }\n    private _pop(e){\n        let worldPoints = this.polygonButton.node.getComponent(PolygonCollider2D).worldPoints;\n        if(Intersection2D.pointInPolygon(e.getUILocation(), worldPoints))\n            this.popup.show();         \n\n    }\n    private progressPlay(e){\n        this._progressTween.start();\n    }\n}"]}