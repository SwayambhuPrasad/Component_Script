{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/AddImage/script/AddImage.ts"],"names":["_decorator","Component","instantiate","Button","UITransform","AS","UIPopup","ReplicatedButton","ccclass","property","requireComponent","AddImage","_button","awake","getComponent","node","addComponent","_addEventListeners","insertButtonsComp","popup","getComponentsInChildren","forEach","child","i","choiceButtons","btn","on","EventType","CLICK","isVisible","hide","_selectedOption","parent","position","height","width","destroy","_onButtonClick","_removeEventListeners","off","show"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACjDC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,gB,iBAAAA,gB;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CV,U;;0BAInCW,Q,WAFZH,OAAO,CAAC,UAAD,C,UACPE,gBAAgB,CAACP,MAAD,C,UAEZM,QAAQ;AAAA;AAAA,6B,0CAHb,MAEaE,QAFb,SAE8B;AAAA;AAAA,oBAAGV,SAAH,CAF9B,CAE4C;AAAA;AAAA;;AAAA;;AAAA,eAGhCW,OAHgC,GAGP,IAHO;AAAA;;AAKxCC,QAAAA,KAAK,GAAG;AAAA;;AACJ,eAAKD,OAAL,GAAe,KAAKE,YAAL,CAAkBX,MAAlB,CAAf;AACA,eAAKY,IAAL,CAAUC,YAAV;AAAA;AAAA;;AACA,eAAKC,kBAAL;;AACA,cAAMC,iBAAiB,GAAG,KAAKC,KAAL,CAAWC,uBAAX,CAAmChB,WAAnC,CAA1B;AACAc,UAAAA,iBAAiB,CAACG,OAAlB,CAA0B,CAACC,KAAD,EAAQC,CAAR,KAAc;AAChCD,YAAAA,KAAK,CAACN,YAAN,CAAmBb,MAAnB;AACAmB,YAAAA,KAAK,CAACN,YAAN;AAAA;AAAA;AACP,WAHD;AAIA,cAAMQ,aAAa,GAAG,KAAKL,KAAL,CAAWC,uBAAX,CAAmCjB,MAAnC,CAAtB;AACAqB,UAAAA,aAAa,CAACH,OAAd,CAAsB,CAACI,GAAD,EAAMF,CAAN,KAAY;AAC9BE,YAAAA,GAAG,CAACV,IAAJ,CAASW,EAAT,CAAYvB,MAAM,CAACwB,SAAP,CAAiBC,KAA7B,iCAAoC,aAAY;AAC5C,kBAAI,KAAI,CAACT,KAAL,CAAWU,SAAf,EAA0B,MAAM,KAAI,CAACV,KAAL,CAAWW,IAAX,EAAN;;AAC1B,kBAAIC,eAAe,GAAG7B,WAAW,CAACuB,GAAG,CAACV,IAAL,CAAjC;;AACAgB,cAAAA,eAAe,CAACC,MAAhB,GAAuB,KAAI,CAACjB,IAA5B;AACAgB,cAAAA,eAAe,CAACE,QAAhB,GAAyB,KAAI,CAAClB,IAAL,CAAUkB,QAAnC;AACAF,cAAAA,eAAe,CAACjB,YAAhB,CAA6BV,WAA7B,EAA0C8B,MAA1C,GAAiD,KAAI,CAACnB,IAAL,CAAUD,YAAV,CAAuBV,WAAvB,EAAoC8B,MAArF;AACAH,cAAAA,eAAe,CAACjB,YAAhB,CAA6BV,WAA7B,EAA0C+B,KAA1C,GAAgD,KAAI,CAACpB,IAAL,CAAUD,YAAV,CAAuBV,WAAvB,EAAoC+B,KAApF;;AACAJ,cAAAA,eAAe,CAACjB,YAAhB,CAA6BX,MAA7B,EAAqCiC,OAArC,GAP4C,CAQ5C;AACA;;AACH,aAVD;AAWH,WAZD;AAaH;;AAEOnB,QAAAA,kBAAkB,GAAG;AACzB,eAAKL,OAAL,CAAaG,IAAb,CAAkBW,EAAlB,CAAqBvB,MAAM,CAACwB,SAAP,CAAiBC,KAAtC,EAA6C,KAAKS,cAAlD,EAAkE,IAAlE;AACH;;AAEOC,QAAAA,qBAAqB,GAAG;AAC5B,eAAK1B,OAAL,CAAaG,IAAb,CAAkBwB,GAAlB,CAAsBpC,MAAM,CAACwB,SAAP,CAAiBC,KAAvC,EAA8C,KAAKS,cAAnD,EAAmE,IAAnE;AACH;;AAEOA,QAAAA,cAAc,GAAG;AACrB,eAAKlB,KAAL,CAAWqB,IAAX;AACH;;AAxCuC,O;;;;;iBACC,I","sourcesContent":["import { _decorator, Component, Node,instantiate, Button, UITransform, UI } from 'cc';\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { UIPopup } from \"db://as_framework/scripts/UIPopup\";\nimport { ReplicatedButton } from \"db://as_framework/scripts/ReplicatedButton\";\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass('AddImage')\n@requireComponent(Button)\nexport class AddImage extends AS(Component) {\n    @property(UIPopup) popup: UIPopup|null = null;\n\n    private _button: Button | null = null;\n\n    awake() {\n        this._button = this.getComponent(Button);\n        this.node.addComponent(ReplicatedButton);\n        this._addEventListeners();\n        const insertButtonsComp = this.popup.getComponentsInChildren(UITransform);\n        insertButtonsComp.forEach((child, i) => {\n                child.addComponent(Button);\n                child.addComponent(ReplicatedButton);\n        })\n        const choiceButtons = this.popup.getComponentsInChildren(Button);\n        choiceButtons.forEach((btn, i) => {\n            btn.node.on(Button.EventType.CLICK, async () => {\n                if (this.popup.isVisible) await this.popup.hide();\n                let _selectedOption = instantiate(btn.node);\n                _selectedOption.parent=this.node;\n                _selectedOption.position=this.node.position;\n                _selectedOption.getComponent(UITransform).height=this.node.getComponent(UITransform).height;\n                _selectedOption.getComponent(UITransform).width=this.node.getComponent(UITransform).width;\n                _selectedOption.getComponent(Button).destroy();\n                //this._removeEventListeners();\n                // take i and get the image to add. \n            })\n        })\n    }\n\n    private _addEventListeners() {\n        this._button.node.on(Button.EventType.CLICK, this._onButtonClick, this);\n    }\n\n    private _removeEventListeners() {\n        this._button.node.off(Button.EventType.CLICK, this._onButtonClick, this);\n    }\n\n    private _onButtonClick() {        \n        this.popup.show();\n    }\n    \n}\n\n"]}