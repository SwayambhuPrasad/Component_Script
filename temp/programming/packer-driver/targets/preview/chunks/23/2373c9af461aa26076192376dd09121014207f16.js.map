{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/SelectAndMatch/SelectAndMatch.ts"],"names":["_decorator","Component","Node","instantiate","Button","Sprite","Prefab","Layout","Color","SpriteFrame","AS","ReplicatedButton","ccclass","property","SelectAndMatch","_correctAns","_options","_store","_completedSet","_greenColor","_redColor","_whiteColor","_transparent","_completedMatches","awake","check","addComponent","reset","next","i","answer","length","charAt","console","log","newOption","matchOption","getComponent","spriteFrame","options","children","hil","parent","objectContainer","node","push","forEach","btn","on","EventType","CLICK","_optionSelect","_check","_matchNext","_reset","_hilight","active","state","correctCheck","_correctMatch","_colorFeedback","scheduleOnce","_resetToNormal","interactable","thatsRight","color"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, instantiate, Button, Sprite, Prefab, Layout, Color, SpriteFrame} from 'cc';\nimport { AS } from \"db://as_framework/scripts/ASComponent\";\nimport { ReplicatedButton } from \"db://as_framework/scripts/ReplicatedButton\";\nconst { ccclass, property } = _decorator;\n\n@ccclass('SelectAndMatch')\nexport class SelectAndMatch extends AS(Component) {\n    @property(Layout) objectContainer : Layout | null = null;\n    @property(Prefab) matchOption : Prefab | null = null;\n    @property(Node) check : Node | null = null;\n    @property(Node) reset : Node | null = null;\n    @property(Node) next : Node | null = null;\n    @property(Node) thatsRight : Node | null = null;\n    @property(SpriteFrame) options :SpriteFrame[] | null = [];\n    @property(SpriteFrame) hil :SpriteFrame | null = null;\n    @property answer = '';\n\n    private _correctAns = [];\n    private _options : Node[] | null = [];\n    private _store = [];\n    private _completedSet = [];\n    private _greenColor = new Color(107,207,107,255);\n    private _redColor = new Color(250,75,75,255);\n    private _whiteColor = new Color(255,255,255,255);\n    private _transparent = new Color(255,255,255,0);\n    private _completedMatches = 0;\n    awake(){\n\n        this.check.addComponent(ReplicatedButton);\n        this.reset.addComponent(ReplicatedButton);\n        this.next.addComponent(ReplicatedButton);\n\n        for(let i=0; i < this.answer.length; i++)\n        {\n            this._correctAns[i] = this.answer.charAt(i);\n            console.log(this._correctAns[i])\n            let newOption = instantiate(this.matchOption);\n            newOption.getComponent(Sprite).spriteFrame = this.options[i];\n            newOption.children[0].getComponent(Sprite).spriteFrame = this.hil;\n            newOption.parent = this.objectContainer.node;\n            newOption.addComponent(ReplicatedButton);\n            this._options.push(newOption);\n        }\n\n        for(let i = 0; i < this._correctAns.length/2; i++)\n            this._completedSet.push(false);\n\n        this._options.forEach((btn, i) => {\n            btn.on(Button.EventType.CLICK, ()=>{\n                this._optionSelect(btn,i);        \n            },this)\n        })\n\n        this.check.on(Button.EventType.CLICK,this._check,this)\n        \n        this.next.on(Button.EventType.CLICK,this._matchNext,this)\n\n        this.reset.on(Button.EventType.CLICK,this._reset,this)\n    }\n\n    private _optionSelect(btn,i){\n        this._hilight(btn, true);\n        switch(this._store.length){\n            case 0:\n                this._store.push(i);\n                break;\n            case 1:\n                if(i != this._store[0]){\n                    this._store.push(i);\n                    this.check.active = true;\n                }\n                break;\n            case 2:\n                if(i != this._store[0] && i != this._store[1]){\n                    this._hilight(this._options[this._store[0]], false);\n                    this._hilight(this._options[this._store[1]], false);\n                    this._store = [];\n                    this.check.active = false;\n                    this._store.push(i);\n                }\n                break;\n        }\n    }\n    private _hilight(btn, state){\n        btn.children[0].active = state;\n    }\n    private _check(){\n        let correctCheck = false;\n        for(let i=0; i<this._correctAns.length; i=i+2)\n        {   if((this._store[0] == this._correctAns[i] || this._store[0] == this._correctAns[i+1]) && (this._store[1] == this._correctAns[i] || this._store[1] == this._correctAns[i+1])){\n                this._completedSet[i/2] = true;\n                this._correctMatch();\n                correctCheck = true;\n                break;\n            }\n        }\n        if(!correctCheck){\n            this._colorFeedback(this._options[this._store[0]], this._redColor)\n            this._colorFeedback(this._options[this._store[1]], this._redColor)\n            this.scheduleOnce(this._resetToNormal, 1)\n        }\n    }\n\n    private _resetToNormal(){\n        if(this._store.length > 0){\n        this._colorFeedback(this._options[this._store[0]], this._whiteColor)\n        this._colorFeedback(this._options[this._store[1]], this._whiteColor)\n        }\n    }\n\n    private _correctMatch(){\n        this._options.forEach((btn,i)=>{\n            btn.getComponent(Button).interactable = false;\n        })\n        this._colorFeedback(this._options[this._store[0]], this._greenColor);\n        this._colorFeedback(this._options[this._store[1]], this._greenColor);\n        this._hilight(this._options[this._store[0]], false);\n        this._hilight(this._options[this._store[1]], false);\n        this._store = [];\n        this._completedMatches++;\n        this.check.active = false;\n        this.thatsRight.active = true;\n        if(this._completedMatches < this._correctAns.length/2)\n            this.next.active = true;\n    }\n\n    private _colorFeedback(btn, color){\n        btn.getComponent(Sprite).color = color;\n    }\n\n    private _matchNext(){\n        this._options.forEach((btn,i)=>{\n            btn.getComponent(Button).interactable = true;\n        })\n        this.next.active = false;\n        this.thatsRight.active = false;\n        for (let i = 0; i < this._correctAns.length; i=i+2) {\n            if (this._completedSet[i/2]) {\n                this._options[this._correctAns[i]].getComponent(Button).interactable = false;\n                this._options[this._correctAns[i+1]].getComponent(Button).interactable = false;\n                this._colorFeedback(this._options[this._correctAns[i]],this._transparent)\n                this._colorFeedback(this._options[this._correctAns[i+1]],this._transparent)\n            }\n        }\n    }\n    private _reset(){\n        this._options.forEach((btn,i)=>{\n            btn.getComponent(Button).interactable = true;\n            this._hilight(btn, false)\n            this._colorFeedback(btn, this._whiteColor)\n        })\n        this._completedMatches = 0;\n        this._store = [];\n        this.next.active = false;\n        this.check.active = false;\n        this.thatsRight.active = false;\n        for (let i = 0; i < this._correctAns.length/2; i++) \n            this._completedSet[i] = false;\n    }\n}"]}