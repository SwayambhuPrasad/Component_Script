{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/assets/AddImage/script/AddImage.ts"],"names":["_decorator","Component","instantiate","Button","UITransform","AS","UIPopup","ReplicatedButton","ccclass","property","requireComponent","AddImage","_button","awake","getComponent","node","addComponent","_addEventListeners","insertButtonsComp","popup","children","forEach","child","i","on","EventType","CLICK","isVisible","hide","_selectedOption","parent","position","height","width","destroy","_onButtonClick","_removeEventListeners","off","show"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACjDC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,gB,iBAAAA,gB;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CV,U;;0BAInCW,Q,WAFZH,OAAO,CAAC,UAAD,C,UACPE,gBAAgB,CAACP,MAAD,C,UAEZM,QAAQ;AAAA;AAAA,6B,0CAHb,MAEaE,QAFb,SAE8B;AAAA;AAAA,oBAAGV,SAAH,CAF9B,CAE4C;AAAA;AAAA;;AAAA;;AAAA,eAGhCW,OAHgC,GAGP,IAHO;AAAA;;AAKxCC,QAAAA,KAAK,GAAG;AAAA;;AACJ,eAAKD,OAAL,GAAe,KAAKE,YAAL,CAAkBX,MAAlB,CAAf;AACA,eAAKY,IAAL,CAAUC,YAAV;AAAA;AAAA;;AACA,eAAKC,kBAAL;;AACA,cAAMC,iBAAiB,GAAG,KAAKC,KAAL,CAAWJ,IAAX,CAAgBK,QAA1C;AACAF,UAAAA,iBAAiB,CAACG,OAAlB,CAA0B,CAACC,KAAD,EAAQC,CAAR,KAAc;AAChCD,YAAAA,KAAK,CAACN,YAAN,CAAmBb,MAAnB;AACAmB,YAAAA,KAAK,CAACN,YAAN;AAAA;AAAA;AAEAM,YAAAA,KAAK,CAACE,EAAN,CAASrB,MAAM,CAACsB,SAAP,CAAiBC,KAA1B,iCAAiC,aAAY;AACzC,kBAAI,KAAI,CAACP,KAAL,CAAWQ,SAAf,EAA0B,MAAM,KAAI,CAACR,KAAL,CAAWS,IAAX,EAAN;;AAC1B,kBAAIC,eAAe,GAAG3B,WAAW,CAACoB,KAAD,CAAjC;;AACAO,cAAAA,eAAe,CAACC,MAAhB,GAAuB,KAAI,CAACf,IAA5B;AACAc,cAAAA,eAAe,CAACE,QAAhB,GAAyB,KAAI,CAAChB,IAAL,CAAUgB,QAAnC;AACAF,cAAAA,eAAe,CAACf,YAAhB,CAA6BV,WAA7B,EAA0C4B,MAA1C,GAAiD,KAAI,CAACjB,IAAL,CAAUD,YAAV,CAAuBV,WAAvB,EAAoC4B,MAArF;AACAH,cAAAA,eAAe,CAACf,YAAhB,CAA6BV,WAA7B,EAA0C6B,KAA1C,GAAgD,KAAI,CAAClB,IAAL,CAAUD,YAAV,CAAuBV,WAAvB,EAAoC6B,KAApF;;AACAJ,cAAAA,eAAe,CAACf,YAAhB,CAA6BX,MAA7B,EAAqC+B,OAArC,GAPyC,CAQzC;AACA;;AACH,aAVD;AAWP,WAfD;AAgBH;;AAEOjB,QAAAA,kBAAkB,GAAG;AACzB,eAAKL,OAAL,CAAaG,IAAb,CAAkBS,EAAlB,CAAqBrB,MAAM,CAACsB,SAAP,CAAiBC,KAAtC,EAA6C,KAAKS,cAAlD,EAAkE,IAAlE;AACH;;AAEOC,QAAAA,qBAAqB,GAAG;AAC5B,eAAKxB,OAAL,CAAaG,IAAb,CAAkBsB,GAAlB,CAAsBlC,MAAM,CAACsB,SAAP,CAAiBC,KAAvC,EAA8C,KAAKS,cAAnD,EAAmE,IAAnE;AACH;;AAEOA,QAAAA,cAAc,GAAG;AACrB,eAAKhB,KAAL,CAAWmB,IAAX;AACH;;AAtCuC,O;;;;;iBACC,I","sourcesContent":["import { _decorator, Component, Node,instantiate, Button, UITransform, UI } from 'cc';\nimport { AS } from \"db://as_framework/scripts//ASComponent\";\nimport { UIPopup } from \"db://as_framework/scripts/UIPopup\";\nimport { ReplicatedButton } from \"db://as_framework/scripts/ReplicatedButton\";\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass('AddImage')\n@requireComponent(Button)\nexport class AddImage extends AS(Component) {\n    @property(UIPopup) popup: UIPopup|null = null;\n\n    private _button: Button | null = null;\n\n    awake() {\n        this._button = this.getComponent(Button);\n        this.node.addComponent(ReplicatedButton);\n        this._addEventListeners();\n        const insertButtonsComp = this.popup.node.children\n        insertButtonsComp.forEach((child, i) => {\n                child.addComponent(Button);\n                child.addComponent(ReplicatedButton);\n\n                child.on(Button.EventType.CLICK, async () => {\n                    if (this.popup.isVisible) await this.popup.hide();\n                    let _selectedOption = instantiate(child);\n                    _selectedOption.parent=this.node;\n                    _selectedOption.position=this.node.position;\n                    _selectedOption.getComponent(UITransform).height=this.node.getComponent(UITransform).height;\n                    _selectedOption.getComponent(UITransform).width=this.node.getComponent(UITransform).width;\n                    _selectedOption.getComponent(Button).destroy();\n                    //this._removeEventListeners();\n                    // take i and get the image to add. \n                })\n        })\n    }\n\n    private _addEventListeners() {\n        this._button.node.on(Button.EventType.CLICK, this._onButtonClick, this);\n    }\n\n    private _removeEventListeners() {\n        this._button.node.off(Button.EventType.CLICK, this._onButtonClick, this);\n    }\n\n    private _onButtonClick() {        \n        this.popup.show();\n    }\n    \n}\n\n"]}