{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/ResponsiveCanvas.ts"],"names":["Component","ResolutionPolicy","view","_decorator","AS","ccclass","disallowMultiple","ResponsiveCanvas","makeResponsive","deviceResolution","getCanvasSize","designResolution","getDesignResolutionSize","desiredRatio","width","height","deviceRatio","setDesignResolutionSize","FIXED_HEIGHT","FIXED_WIDTH","onLoad","setResizeCallback"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACnCC,MAAAA,E,iBAAAA,E;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAgCH,U;AAEtC;AACA;AACA;;kCAGaI,gB,WAFZF,OAAO,CAAC,kBAAD,C,gBACPC,gB,UADD,MAEaC,gBAFb,SAEsC;AAAA;AAAA,oBAAGP,SAAH,CAFtC,CAEoD;AAClDQ,QAAAA,cAAc,GAAG;AACf,cAAMC,gBAAgB,GAAGP,IAAI,CAACQ,aAAL,EAAzB;AACA,cAAMC,gBAAgB,GAAGT,IAAI,CAACU,uBAAL,EAAzB,CAFe,CAIf;;AACA,cAAMC,YAAY,GAAGF,gBAAgB,CAACG,KAAjB,GAAyBH,gBAAgB,CAACI,MAA/D,CALe,CAMf;;AACA,cAAMC,WAAW,GAAGP,gBAAgB,CAACK,KAAjB,GAAyBL,gBAAgB,CAACM,MAA9D;;AAEA,cAAIC,WAAW,IAAIH,YAAnB,EAAiC;AAC/BX,YAAAA,IAAI,CAACe,uBAAL,CACEN,gBAAgB,CAACG,KADnB,EAEEH,gBAAgB,CAACI,MAFnB,EAGEd,gBAAgB,CAACiB,YAHnB;AAKD,WAND,MAMO,IAAIF,WAAW,GAAGH,YAAlB,EAAgC;AACrCX,YAAAA,IAAI,CAACe,uBAAL,CACEN,gBAAgB,CAACG,KADnB,EAEEH,gBAAgB,CAACI,MAFnB,EAGEd,gBAAgB,CAACkB,WAHnB;AAKD;AACF;;AAEDC,QAAAA,MAAM,GAAG;AACPlB,UAAAA,IAAI,CAACmB,iBAAL,CAAuB,KAAKb,cAA5B;AACA,eAAKA,cAAL;AACD;;AA5BiD,O","sourcesContent":["import { Component, ResolutionPolicy, view, _decorator } from \"cc\";\nimport { AS } from \"./ASComponent\";\n\nconst { ccclass, disallowMultiple } = _decorator;\n\n/**\n * Make the canvas responsive for any aspect ratio.\n */\n@ccclass(\"ResponsiveCanvas\")\n@disallowMultiple\nexport class ResponsiveCanvas extends AS(Component) {\n  makeResponsive() {\n    const deviceResolution = view.getCanvasSize();\n    const designResolution = view.getDesignResolutionSize();\n\n    // calculte design ratio\n    const desiredRatio = designResolution.width / designResolution.height;\n    // calculte device ratio\n    const deviceRatio = deviceResolution.width / deviceResolution.height;\n\n    if (deviceRatio >= desiredRatio) {\n      view.setDesignResolutionSize(\n        designResolution.width,\n        designResolution.height,\n        ResolutionPolicy.FIXED_HEIGHT,\n      );\n    } else if (deviceRatio < desiredRatio) {\n      view.setDesignResolutionSize(\n        designResolution.width,\n        designResolution.height,\n        ResolutionPolicy.FIXED_WIDTH,\n      );\n    }\n  }\n\n  onLoad() {\n    view.setResizeCallback(this.makeResponsive);\n    this.makeResponsive();\n  }\n}\n"]}