{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/TranslatedSprite.ts"],"names":["Component","Sprite","SpriteFrame","_decorator","EDITOR","AS","error","i18n","ccclass","property","requireComponent","LanguageSpriteFrame","type","TranslatedSprite","tooltip","_sprite","_spriteMap","key","_key","spriteFrame","value","onLoad","getComponent","spriteList","forEach","langSprite","language","updateTranslation","enabled","currentLanguage","Array"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;;AAChCC,MAAAA,M,UAAAA,M;;AACAC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CP,U;AAG1CQ,MAAAA,mB,WADLH,OAAO,CAAC,qBAAD,C,UAILC,QAAQ,CAAC;AACRG,QAAAA,IAAI,EAAEV;AADE,OAAD,C,2BAJX,MACMS,mBADN,CAC0B;AAAA;AAAA;;AAAA;AAAA;;AAAA,O,2EACvBF,Q;;;;;iBAAoB,I;;;;;;;iBAKa,I;;;;kCAKvBI,gB,YAFZL,OAAO,CAAC,kBAAD,C,UACPE,gBAAgB,CAACT,MAAD,C,UAUdQ,QAAQ,CAAC;AACRK,QAAAA,OAAO;AADC,OAAD,C,6CAXX,MAEaD,gBAFb,SAEsC;AAAA;AAAA,oBAAGb,SAAH,CAFtC,CAEoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAK1Ce,OAL0C,GAKjB,IALiB;AAAA,eAO1CC,UAP0C,GAOW,EAPX;AAAA;;AAY3C,YAAHC,GAAG,GAAG;AACR,iBAAO,KAAKC,IAAZ;AACD;;AAEc,YAAXC,WAAW,GAAG;AAAA;;AAChB,kCAAO,KAAKJ,OAAZ,qBAAO,cAAcI,WAArB;AACD;;AAEM,YAAHF,GAAG,CAACG,KAAD,EAAgB;AACrB,cAAIhB,MAAJ,EAAY;AACV,iBAAKc,IAAL,GAAYE,KAAZ;AACD,WAFD,MAEO;AACL;AAAA;AAAA;AACD;AACF;;AAEc,YAAXD,WAAW,CAACC,KAAD,EAAQ;AACrB,cAAI,KAAKL,OAAL,IAAgB,IAAhB,IAAwBK,KAAK,IAAI,IAArC,EAA2C;AAC3C,eAAKL,OAAL,CAAaI,WAAb,GAA2BC,KAA3B;AACD;;AAEKC,QAAAA,MAAM,GAAG;AAAA;;AAAA;AACb,YAAA,KAAI,CAACN,OAAL,GAAe,KAAI,CAACO,YAAL,CAAkBrB,MAAlB,CAAf;;AACA,YAAA,KAAI,CAACsB,UAAL,CAAgBC,OAAhB,CAAyBC,UAAD,IAAgB;AACtC,cAAA,KAAI,CAACT,UAAL,CAAgBS,UAAU,CAACC,QAA3B,IAAuCD,UAAU,CAACN,WAAlD;AACD,aAFD;;AAGA,YAAA,KAAI,CAACQ,iBAAL;AALa;AAMd;;AAEDA,QAAAA,iBAAiB,GAAG;AAClB,cAAI,CAAC;AAAA;AAAA,4BAAKC,OAAV,EAAmB;AACnB,eAAKT,WAAL,GAAmB,KAAKH,UAAL,CAAgB;AAAA;AAAA,4BAAKa,eAArB,CAAnB;AACD;;AA5CiD,O,wEACjDpB,Q;;;;;iBAAwB,E;;qFAExBA,Q;;;;;iBAA8B,IAAIqB,KAAJ,E","sourcesContent":["import { Component, Sprite, SpriteFrame, _decorator } from \"cc\";\nimport { EDITOR } from \"cc/env\";\nimport { AS } from \"./ASComponent\";\nimport { error } from \"./Logger\";\nimport { i18n } from \"./Translations\";\n\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass(\"LanguageSpriteFrame\")\nclass LanguageSpriteFrame {\n  @property language = \"US\";\n\n  @property({\n    type: SpriteFrame,\n  })\n  spriteFrame: SpriteFrame | null = null;\n}\n\n@ccclass(\"TranslatedSprite\")\n@requireComponent(Sprite)\nexport class TranslatedSprite extends AS(Component) {\n  @property private _key = \"\";\n\n  @property private spriteList = new Array<LanguageSpriteFrame>();\n\n  private _sprite: Sprite | null = null;\n\n  private _spriteMap: { [lang: string]: SpriteFrame | null } = {};\n\n  @property({\n    tooltip: `The key used to get the translated string.`,\n  })\n  get key() {\n    return this._key;\n  }\n\n  get spriteFrame() {\n    return this._sprite?.spriteFrame;\n  }\n\n  set key(value: string) {\n    if (EDITOR) {\n      this._key = value;\n    } else {\n      error(`Cannot set key outside the editor!`);\n    }\n  }\n\n  set spriteFrame(value) {\n    if (this._sprite == null || value == null) return;\n    this._sprite.spriteFrame = value;\n  }\n\n  async onLoad() {\n    this._sprite = this.getComponent(Sprite);\n    this.spriteList.forEach((langSprite) => {\n      this._spriteMap[langSprite.language] = langSprite.spriteFrame;\n    });\n    this.updateTranslation();\n  }\n\n  updateTranslation() {\n    if (!i18n.enabled) return;\n    this.spriteFrame = this._spriteMap[i18n.currentLanguage];\n  }\n}\n"]}