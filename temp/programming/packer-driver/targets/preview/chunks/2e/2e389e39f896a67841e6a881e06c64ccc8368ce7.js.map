{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/UIView.ts"],"names":["Component","EventHandler","_decorator","AS","warn","editorUtils","UIAnimationLibrary","ccclass","property","UIView","type","tooltip","displayOrder","enumType","showAnim","_showAnim","showDuration","_showDuration","hideAnim","_hideAnim","hideDuration","_hideDuration","isVisible","node","activeInHierarchy","value","getName","show","_isAnimating","emitEvents","aboutToShowEvents","emit","EventType","ABOUT_TO_SHOW","active","anim","name","showCompleteEvents","SHOW_COMPLETE","hide","aboutToHideEvents","ABOUT_TO_HIDE","hideCompleteEvents","HIDE_COMPLETE","Animations","Array"],"mappings":"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","sourcesContent":["import { Component, EventHandler, _decorator } from \"cc\";\nimport { AS } from \"./ASComponent\";\nimport { warn } from \"./Logger\";\nimport { editorUtils, UIAnimationLibrary } from \"./UIAnimLibrary\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"UIView\")\nexport class UIView extends AS(Component) {\n  static readonly EventType = {\n    ABOUT_TO_SHOW: \"about-to-show\",\n    SHOW_COMPLETE: \"show-complete\",\n    ABOUT_TO_HIDE: \"about-to-hide\",\n    HIDE_COMPLETE: \"hide-complete\",\n  };\n\n  static readonly Animations = editorUtils.enumType;\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to trigger when view about to show.\",\n    displayOrder: 30,\n  })\n  aboutToShowEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to trigger when view is shown.\",\n    displayOrder: 31,\n  })\n  showCompleteEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to trigger when view about to hide.\",\n    displayOrder: 32,\n  })\n  aboutToHideEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to trigger when view is hidden.\",\n    displayOrder: 33,\n  })\n  hideCompleteEvents = new Array<EventHandler>();\n\n  @property protected _showAnim: keyof typeof UIAnimationLibrary = \"none\";\n\n  @property protected _hideAnim: keyof typeof UIAnimationLibrary = \"none\";\n\n  @property protected _showDuration = 0.4;\n\n  @property protected _hideDuration = 0.4;\n\n  @property({ type: editorUtils.enumType, tooltip: \"Choose show animation.\" }) get showAnim() {\n    return editorUtils.enumType[this._showAnim];\n  }\n\n  @property get showDuration() {\n    return this._showDuration;\n  }\n\n  @property({ type: editorUtils.enumType, tooltip: \"Choose hide animation.\" }) get hideAnim() {\n    return editorUtils.enumType[this._hideAnim];\n  }\n\n  @property get hideDuration() {\n    return this._hideDuration;\n  }\n\n  get isVisible() {\n    return this.node.activeInHierarchy;\n  }\n\n  set showAnim(value) {\n    this._showAnim = editorUtils.getName(value);\n  }\n\n  set showDuration(value) {\n    this._showDuration = value;\n  }\n\n  set hideAnim(value) {\n    this._hideAnim = editorUtils.getName(value);\n  }\n\n  set hideDuration(value) {\n    this._hideDuration = value;\n  }\n\n  async show() {\n    if (this.isVisible || this._isAnimating) return;\n    EventHandler.emitEvents(this.aboutToShowEvents, this);\n    this.node.emit(UIView.EventType.ABOUT_TO_SHOW, this);\n    this.node.active = true;\n    this._isAnimating = true;\n    const anim = UIAnimationLibrary[this._showAnim];\n    if (!anim) warn(\"No animation found for \" + this.showAnim, this._showAnim, this.node.name);\n    await UIAnimationLibrary[this._showAnim](this.node, this._showDuration);\n    this._isAnimating = false;\n    EventHandler.emitEvents(this.showCompleteEvents, this);\n    this.node.emit(UIView.EventType.SHOW_COMPLETE, this);\n  }\n\n  async hide() {\n    if (!this.isVisible || this._isAnimating) return;\n    EventHandler.emitEvents(this.aboutToHideEvents, this);\n    this.node.emit(UIView.EventType.ABOUT_TO_HIDE, this);\n    this._isAnimating = true;\n    await UIAnimationLibrary[this._hideAnim](this.node, this._hideDuration);\n    this._isAnimating = false;\n    this.node.active = false;\n    EventHandler.emitEvents(this.hideCompleteEvents, this);\n    this.node.emit(UIView.EventType.HIDE_COMPLETE, this);\n  }\n}\n"]}