{"version":3,"sources":["file:///Users/swayambhupanda/Documents/GitHub/applet-framework-demo/extensions/as_framework/framework/assets/scripts/MenuController.ts"],"names":["Button","Component","EventHandler","Layout","_decorator","AS","UIPopup","ccclass","property","MenuController","type","tooltip","displayOrder","_isOpen","menuButton","_menuButton","homeButton","_homeButton","resetButton","_resetButton","crossButton","_crossButton","popup","_popup","questionButtonsContainer","_questionButtonsContainer","isOpen","value","showMenu","hideMenu","hide","show","onEnable","node","on","EventType","CLICK","_onMenuButtonClicked","_onCrossButtonClicked","_onHomeButtonClicked","_onResetButtonClicked","children","forEach","button","_onQuestionButtonClicked","HIDE_COMPLETE","_onPopupHide","SHOW_COMPLETE","_onPopupShow","onDisable","off","getStateData","updateStateData","data","emitEvents","menuOpenEvents","emit","MENU_OPEN","menuCloseEvents","MENU_CLOSE","menuHomeEvents","MENU_HOME","menuResetEvents","MENU_RESET","index","getSiblingIndex","menuQuestionEvents","MENU_QUESTION","active","Array"],"mappings":"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","sourcesContent":["import { Button, Component, EventHandler, Layout, _decorator } from \"cc\";\nimport { AS } from \"./ASComponent\";\nimport { IReplicatedEvent } from \"./NetworkReplicator\";\nimport { UIPopup } from \"./UIPopup\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"MenuController\")\nexport class MenuController extends AS(Component) implements IReplicatedEvent {\n  static readonly EventType = {\n    MENU_OPEN: \"menu-open\",\n    MENU_CLOSE: \"menu-close\",\n    MENU_HOME: \"menu-home\",\n    MENU_RESET: \"menu-reset\",\n    MENU_QUESTION: \"menu-question\",\n  };\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to be triggered when menu popup is shown.\",\n    displayOrder: 30,\n  })\n  menuOpenEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to be triggered when menu popup is closed.\",\n    displayOrder: 31,\n  })\n  menuCloseEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to be triggered when home button is clicked.\",\n    displayOrder: 32,\n  })\n  menuHomeEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to be triggered when reset button is clicked.\",\n    displayOrder: 33,\n  })\n  menuResetEvents = new Array<EventHandler>();\n\n  @property({\n    type: [EventHandler],\n    tooltip: \"The event handler to be triggered when a question button is clicked.\",\n    displayOrder: 34,\n  })\n  menuQuestionEvents = new Array<EventHandler>();\n\n  @property protected _menuButton: Button | null = null;\n\n  @property protected _homeButton: Button | null = null;\n\n  @property protected _resetButton: Button | null = null;\n\n  @property protected _crossButton: Button | null = null;\n\n  @property protected _popup: UIPopup | null = null;\n\n  @property protected _questionButtonsContainer: Layout | null = null;\n\n  private _isOpen = false;\n\n  @property({ type: Button, tooltip: \"The button to show the menu popup node.\" })\n  get menuButton() {\n    return this._menuButton;\n  }\n\n  @property({ type: Button, tooltip: \"The button to move the start screen.\" })\n  get homeButton() {\n    return this._homeButton;\n  }\n\n  @property({ type: Button, tooltip: \"The button to reset the current screen.\" })\n  get resetButton() {\n    return this._resetButton;\n  }\n\n  @property({ type: Button, tooltip: \"The button to hide the menu popup node.\" })\n  get crossButton() {\n    return this._crossButton;\n  }\n\n  @property({ type: UIPopup, tooltip: \"The menu popup component.\" }) get popup() {\n    return this._popup;\n  }\n\n  @property({\n    type: Layout,\n    tooltip: \"The layout component whose child buttons are used to move to a question screen.\",\n  })\n  get questionButtonsContainer() {\n    return this._questionButtonsContainer;\n  }\n\n  get isOpen() {\n    return this._isOpen;\n  }\n\n  set menuButton(value) {\n    this._menuButton = value;\n  }\n\n  set homeButton(value) {\n    this._homeButton = value;\n  }\n\n  set resetButton(value) {\n    this._resetButton = value;\n  }\n\n  set crossButton(value) {\n    this._crossButton = value;\n  }\n\n  set popup(value) {\n    this._popup = value;\n  }\n\n  set questionButtonsContainer(value) {\n    this._questionButtonsContainer = value;\n  }\n\n  set isOpen(value: boolean) {\n    if (this._isOpen === value) return;\n    this._isOpen = value;\n    if (this._isOpen) {\n      this.showMenu();\n    } else {\n      this.hideMenu();\n    }\n  }\n\n  hideMenu() {\n    this.popup?.hide();\n  }\n\n  showMenu() {\n    this.popup?.show();\n  }\n\n  onEnable() {\n    this.menuButton?.node.on(Button.EventType.CLICK, this._onMenuButtonClicked, this);\n    this.crossButton?.node.on(Button.EventType.CLICK, this._onCrossButtonClicked, this);\n    this.homeButton?.node.on(Button.EventType.CLICK, this._onHomeButtonClicked, this);\n    this.resetButton?.node.on(Button.EventType.CLICK, this._onResetButtonClicked, this);\n    this.questionButtonsContainer?.node.children.forEach((button) => {\n      button.on(Button.EventType.CLICK, this._onQuestionButtonClicked, this);\n    });\n    this.popup?.node.on(UIPopup.EventType.HIDE_COMPLETE, this._onPopupHide, this);\n    this.popup?.node.on(UIPopup.EventType.SHOW_COMPLETE, this._onPopupShow, this);\n  }\n\n  onDisable() {\n    this.menuButton?.node.off(Button.EventType.CLICK, this._onMenuButtonClicked, this);\n    this.crossButton?.node.off(Button.EventType.CLICK, this._onCrossButtonClicked, this);\n    this.homeButton?.node.off(Button.EventType.CLICK, this._onHomeButtonClicked, this);\n    this.resetButton?.node.off(Button.EventType.CLICK, this._onResetButtonClicked, this);\n    this.questionButtonsContainer?.node.children.forEach((button) => {\n      button.off(Button.EventType.CLICK, this._onQuestionButtonClicked, this);\n    });\n    this.popup?.node.on(UIPopup.EventType.HIDE_COMPLETE, this._onPopupHide, this);\n    this.popup?.node.on(UIPopup.EventType.SHOW_COMPLETE, this._onPopupShow, this);\n\n    this.hideMenu();\n  }\n\n  getStateData() {\n    return this._isOpen;\n  }\n\n  updateStateData(data: boolean) {\n    if (data) this.showMenu();\n    else this.hideMenu();\n  }\n\n  private _onMenuButtonClicked() {\n    this.showMenu();\n    EventHandler.emitEvents(this.menuOpenEvents, this);\n    this.node.emit(MenuController.EventType.MENU_OPEN, this);\n  }\n\n  private _onCrossButtonClicked() {\n    this.hideMenu();\n    EventHandler.emitEvents(this.menuCloseEvents, this);\n    this.node.emit(MenuController.EventType.MENU_CLOSE, this);\n  }\n\n  private _onHomeButtonClicked() {\n    this.hideMenu();\n    EventHandler.emitEvents(this.menuHomeEvents, this);\n    this.node.emit(MenuController.EventType.MENU_HOME, this);\n  }\n\n  private _onResetButtonClicked() {\n    this.hideMenu();\n    EventHandler.emitEvents(this.menuResetEvents, this);\n    this.node.emit(MenuController.EventType.MENU_RESET, this);\n  }\n\n  private _onQuestionButtonClicked(button: Button) {\n    this.hideMenu();\n    const index = button.node.getSiblingIndex();\n    EventHandler.emitEvents(this.menuQuestionEvents, index + 1);\n    this.node.emit(MenuController.EventType.MENU_QUESTION, index + 1);\n  }\n\n  private _onPopupHide() {\n    this._isOpen = false;\n    if (this.menuButton) this.menuButton.node.active = true;\n  }\n\n  private _onPopupShow() {\n    this._isOpen = true;\n    if (this.menuButton) this.menuButton.node.active = false;\n  }\n}\n"]}